{"version":3,"sources":["services/YelpService.js","components/Search.js","components/Result.js","components/RestaurantDetails.js","services/WorkerGet.js","services/WorkerService.js","components/comments.js","App.js"],"names":["YelpService","get","_get","_asyncToGenerator","url","params","getParams","term","location","response","fetch","proxyurl","method","headers","JSON","parse","text","_x","_x2","apply","arguments","styles","StyleSheet","create","container","flex","justifyContent","paddingHorizontal","input","height","borderColor","borderWidth","marginBottom","paddingLeft","SearchScreen","_ref","navigation","_useState","useState","_useState2","_slicedToArray","restaurant","setRestaurant","_useState3","_useState4","setLocation","_useState5","_useState6","setErreur","handleSearch","_ref2","console","log","navigate","results","error","Toast","show","type","position","text1","visibilityTime","autoHide","topOffset","bottomOffset","_jsxs","View","style","children","_jsx","TextInput","value","onChangeText","placeholder","Button","title","onPress","backgroundColor","restaurantContainer","flexDirection","marginHorizontal","marginVertical","borderRadius","image","width","restaurantInfo","marginLeft","name","fontWeight","ResultsScreen","route","FlatList","data","renderItem","item","TouchableOpacity","restaurantId","id","Image","source","uri","image_url","Text","price","categories","map","cat","join","address1","keyExtractor","padding","restaurantDetails","restaurantName","fontSize","reviewsContainer","reviewsTitle","review","borderBottomWidth","borderBottomColor","paddingBottom","reviewUser","reviewRating","fontStyle","RestaurantDetailsScreen","reviews","setReviews","useEffect","fetchRestaurantDetails","fetchRestaurantReviews","_ref3","ScrollView","display_phone","rating","review_count","index","user","WorkerServiceGet","axios","baseURL","proxyUrl","heading","commentContainer","username","content","marginTop","button","color","CommentComponent","comments","setComments","comment","setComment","then","length","slice","handleSubmit","body","stringify","concat","_toConsumableArray","shift","catch","k","v","Stack","createStackNavigator","App","NavigationContainer","Navigator","initialRouteName","Screen","component","options","ref","setRef"],"mappings":"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","file":"static/js/app.4e1af793.chunk.js","sourcesContent":["import axios from 'axios';\nconst proxyurl = \"https://purple-art-1f04.bellatif6169.workers.dev/\";\nconst apiKey =\n  'p2lseXmq5yarrSoE6PGD8hsXxBwmJV5U1dbV8FodsK26NFwKY3YcurmXSJi-3R9RhtiLpJRZbOi90665i5a_UZxA3RzsIu1gGnaYH24JzcSwoTrsp7_0Y_0xYYMhZHYx';\nconst baseUrl = 'https://api.yelp.com/v3/businesses';\n\n// const YelpService = axios.create({\n//   baseURL:  proxyurl + baseUrl,\n//   headers: {\n//     Authorization: `Bearer ${apiKey}`,\n//     withCredentials: true,\n//     cache: 'no-cache',\n//     },\n// });\n\n//translating the axios instance to fetch\nconst YelpService = {\n      get: async (url, params) => {\n        let getParams = `?term=${params.params.term}&location=${params.params.location}`;\n        const response = await fetch(proxyurl + baseUrl + url + getParams,{\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${apiKey}`,\n          },\n        });\n        return JSON.parse(await response.text());\n\n    }\n\n}\n// YelpService.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n// YelpService.defaults.headers.common['Accept'] = 'application/json';\n\nexport default YelpService;\n\n\n// export default YelpService;\n","// screens/SearchScreen.js\nimport React, { useState } from 'react';\nimport { View, TextInput, Button, Text, StyleSheet } from 'react-native';\nimport YelpService from \"../services/YelpService\";\nimport Toast from 'react-native-toast-message';\n\n\nconst SearchScreen = ({ navigation }) => {\n  const [restaurant, setRestaurant] = useState('');\n  const [location, setLocation] = useState('');\n  const [erreur, setErreur] = useState(false);\n  const handleSearch = async () => {\n    console.log(\"resto\", restaurant);\n    try {\n      const response = await YelpService.get(`/search`, {\n        params: {\n          term: restaurant,\n          location: location,\n        },\n      });\n\n\n\n      navigation.navigate('Results', { results: response['businesses'] });\n    } catch (error) {\n      setErreur(true);\n        Toast.show({\n        type: 'error',\n        position: 'bottom',\n        text1: 'Aucun résultat, veuillez réesseyer    ',\n        visibilityTime: 4000,\n        autoHide: true,\n        topOffset: 30,\n        bottomOffset: 40,\n      });\n      console.error('Error fetching data from Yelp API:', error);\n    }\n  };\n\n\n\n  return (\n    <View style={styles.container}>\n      <TextInput\n        style={styles.input}\n        value={restaurant}\n        onChangeText={setRestaurant}\n        placeholder=\"Nom du restaurant\"\n      />\n      <TextInput\n        style={styles.input}\n        value={location}\n        onChangeText={setLocation}\n        placeholder=\"Ville ou code postal\"\n      />\n      <Button title=\"Valider\" onPress={handleSearch} />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    paddingHorizontal: 10,\n  },\n  input: {\n    height: 40,\n    borderColor: 'gray',\n    borderWidth: 1,\n    marginBottom: 10,\n    paddingLeft: 10,\n  },\n});\n\nexport default SearchScreen;\n","// screens/ResultsScreen.js\nimport React from 'react';\nimport { View, Text, StyleSheet, FlatList, Image,TouchableOpacity  } from 'react-native';\nconst ResultsScreen = ({ route, navigation }) => {\n  const { results } = route.params;\n\n const renderItem = ({ item: restaurant }) => (\n       <TouchableOpacity onPress={() => navigation.navigate('RestaurantDetails', { restaurantId: restaurant.id })}>\n\n    <View style={styles.restaurantContainer}>\n      <Image style={styles.image} source={{ uri: restaurant.image_url }} />\n      <View style={styles.restaurantInfo}>\n        <Text style={styles.name}>{restaurant.name}</Text>\n        <Text>{restaurant.price}</Text>\n        <Text>{restaurant.categories.map((cat) => cat.title).join(', ')}</Text>\n        <Text>{restaurant.location.address1}</Text>\n      </View>\n    </View>\n      \n        </TouchableOpacity>\n  );\n\n  return (\n    <View style={styles.container}>\n      <FlatList\n        data={results}\n        renderItem={renderItem}\n        keyExtractor={(restaurant) => restaurant.id}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n  restaurantContainer: {\n    flexDirection: 'row',\n    marginHorizontal: 10,\n    marginVertical: 5,\n    backgroundColor: '#f5f5f5',\n    borderRadius: 5,\n  },\n  image: {\n    width: 100,\n    height: 100,\n    borderRadius: 5,\n  },\n  restaurantInfo: {\n    marginLeft: 10,\n    justifyContent: 'space-around',\n    flex: 1,\n  },\n  name: {\n    fontWeight: 'bold',\n  },\n});\n\nexport default ResultsScreen;\n","// screens/RestaurantDetailsScreen.js\nimport React, { useEffect, useState } from 'react';\nimport { View, Text, StyleSheet, ScrollView, Image } from 'react-native';\nimport YelpService from '../services/YelpService';\n\nconst RestaurantDetailsScreen = ({ route }) => {\n  const { restaurantId } = route.params;\n\n  const [restaurant, setRestaurant] = useState(null);\n  const [reviews, setReviews] = useState([]);\n\n  useEffect(() => {\n    const fetchRestaurantDetails = async () => {\n      try {\n        const response = await YelpService.get(`/${restaurantId}`);\n        setRestaurant(response.data);\n      } catch (error) {\n        console.error('Error fetching restaurant details:', error);\n      }\n    };\n\n    const fetchRestaurantReviews = async () => {\n      try {\n        const response = await YelpService.get(`/${restaurantId}/reviews`);\n        setReviews(response.data.reviews);\n      } catch (error) {\n        console.error('Error fetching restaurant reviews:', error);\n      }\n    };\n\n    fetchRestaurantDetails();\n    fetchRestaurantReviews();\n  }, [restaurantId]);\n\n  if (!restaurant) {\n    return <Text>Loading...</Text>;\n  }\n\nreturn (\n<ScrollView style={styles.container}>\n      <Image style={styles.image} source={{ uri: restaurant.image_url }} />\n      <View style={styles.restaurantDetails}>\n        <Text style={styles.restaurantName}>{restaurant.name}</Text>\n        <Text>{restaurant.price} - {restaurant.categories.map((cat) => cat.title).join(', ')}</Text>\n        <Text>{restaurant.location.address1}</Text>\n        <Text>Telephone: {restaurant.display_phone}</Text>\n        <Text>Note: {restaurant.rating} ({restaurant.review_count} avis)</Text>\n      </View>\n      <View style={styles.reviewsContainer}>\n        <Text style={styles.reviewsTitle}>Avis:</Text>\n        {reviews.map((review, index) => (\n          <View key={index} style={styles.review}>\n            <Text style={styles.reviewUser}>{review.user.name}:</Text>\n            <Text>{review.text}</Text>\n            <Text style={styles.reviewRating}>Rating: {review.rating}</Text>\n          </View>\n        ))}\n      </View>\n    </ScrollView>\n);\n};\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    padding: 10,\n  },\n  image: {\n    width: '100%',\n    height: 200,\n    marginBottom: 15,\n  },\n  restaurantDetails: {\n    marginBottom: 20,\n  },\n  restaurantName: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 5,\n  },\n  reviewsContainer: {},\n  reviewsTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginBottom: 10,\n  },\n  review: {\n    marginBottom: 10,\n    borderBottomWidth: 1,\n    borderBottomColor: '#ccc',\n    paddingBottom: 10,\n  },\n  reviewUser: {\n    fontWeight: 'bold',\n  },\n  reviewRating: {\n    fontStyle: 'italic',\n  },\n});\n\nexport default RestaurantDetailsScreen;\n","//create a new axios instance with the baseURL of the proxyurl + cloudflare worker url in comments.js\n//\n// Compare this snippet from services/WorkerService.js:\nimport axios from 'axios';\n\nconst proxyurl = \"https://purple-art-1f04.bellatif6169.workers.dev/\";\n//const proxyurl = \"\";\nconst baseUrl = 'https://api-livre.bellatif6169.workers.dev';\n\n//fetch instead of axios\n\nconst WorkerServiceGet = axios.create({\n\n    baseURL:  baseUrl,\n    \n    headers: {\n        'Content-Type': '*/*'\n    },\n});\n\nexport default WorkerServiceGet;","//create a new axios instance with the baseURL of the proxyurl + cloudflare worker url in comments.js\n//\n// Compare this snippet from services/WorkerService.js:\nimport axios from 'axios';\n\nconst proxyUrl = \"https://purple-art-1f04.bellatif6169.workers.dev/\";\n//const proxyurl = \"\";\nconst baseUrl = 'https://api-livre.bellatif6169.workers.dev';\n\n//fetch instead of axio\n\nconst WorkerServicePost = axios.create({\n\n    baseURL:  proxyUrl + baseUrl,\n    headers: {\n        'Content-Type': 'application/json',\n        'Referrer-Policy': 'strict-origin-when-cross-origin',\n        'Cross-Origin-Embedder-Policy': 'require-corp; report-to=\"default\";',\n        'Cross-Origin-Opener-Policy': 'same-site; report-to=\"default\";',\n        'Cross-Origin-Resource-Policy': 'same-site',\n        'X-Content-Type-Options': 'nosniff',\n        \n    },\n\n\n});\n\n/*\nadd headers  security headers  \"X-Content-Type-Options\": \"nosniff\",\n      \"Referrer-Policy\": \"strict-origin-when-cross-origin\",\n      \"Cross-Origin-Embedder-Policy\": 'require-corp; report-to=\"default\";',\n      \"Cross-Origin-Opener-Policy\": 'same-site; report-to=\"default\";',\n      \"Cross-Origin-Resource-Policy\": \"same-site\",\n*/\n\n\n\n\nexport default WorkerServicePost;\n","import React, { useState, useEffect } from 'react';\nimport { View, Text, TextInput, Button, StyleSheet } from 'react-native';\nimport axios from 'axios';\nimport WorkerServicePost from '../services/WorkerService';\nimport WorkerServiceGet from '../services/WorkerGet';\nimport { FlatList, ScrollView } from 'react-native-gesture-handler';\nconst CommentComponent = () => {\n    const [comments, setComments] = useState([]);\n    const [comment, setComment] = useState('');\n\n    useEffect(() =>{\n\n        //use workerservice.js to fetch comments with axios\n\n       \n                const response = WorkerServiceGet.get('/comments/').then((response) => {\n                    console.log(response.data);\n                    // get max 10 comments\n                    if (response.data.length > 5) {\n                        response.data = response.data.slice(response.data.length - 5, response.data.length);\n                    }\n                    setComments(response.data);\n                });\n\n\n\n    }, []);\n\n    const handleSubmit = async  () => {\n\n    fetch('https://api-livre.bellatif6169.workers.dev/comments/', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'Referrer-Policy': 'strict-origin-when-cross-origin',\n            'Cross-Origin-Embedder-Policy': 'require-corp; report-to=\"default\";',\n            'Cross-Origin-Opener-Policy': 'same-site; report-to=\"default\";',\n            'Cross-Origin-Resource-Policy': 'same-site',\n            'X-Content-Type-Options': 'nosniff',\n\n        },\n        body: JSON.stringify({\n            content: comment\n        })\n    }).then((response) => {\n\n        setComments([...comments, comment]);\n        //limit the number of comments to 5\n        if (comments.length > 5) {\n            comments.shift();\n        }\n        setComment('');\n    }).catch((error) => {\n        console.error('Error fetching data from Cloudflare Workers API:', error);\n    });}\n    \n\n//iterate on comments array and display them in a list (the format is id: \"comment\")\n\n\n        return ( \n            <View style={styles.container}>\n            <Text style={styles.heading}>Livre d'or</Text>\n            <ScrollView style={styles.container}>\n            <FlatList\n                data={comments}\n                keyExtractor={(k,v) => v}\n                renderItem={({item}) => {\n                    return <View style={styles.item} >\n                    <Text>anonyme: {item}</Text>\n                    </View>\n                }}\n            />\n            </ScrollView>\n            <Text style={styles.heading}>Add a comment</Text>\n            <View style={styles.container}>\n                    <TextInput\n                        style={styles.input}\n                        placeholder=\"Enter your comment\"\n                        value={comment}\n                        onChangeText={setComment} />\n                    <Button style={styles.button} title=\"Submit\" onPress={handleSubmit} />\n                </View>\n                </View>\n        );\n    };\n\n\n    const styles = StyleSheet.create({\n        container: {\n            flex: 1,\n            padding: 20,\n            backgroundColor: '#fff'\n        },\n        heading: {\n            fontSize: 24,\n            fontWeight: 'bold',\n            marginBottom: 20\n        },\n        commentContainer: {\n            marginBottom: 10,\n            borderWidth: 1,\n            borderColor: '#ccc',\n            padding: 10\n        },\n        username: {\n            fontWeight: 'bold'\n        },\n        content: {\n            marginTop: 5\n        },\n        input: {\n            borderWidth: 1,\n            borderColor: '#ccc',\n            padding: 10,\n            marginBottom: 10\n        },\n        button: {\n            backgroundColor: 'blue',\n            color: '#fff',\n            padding: 10\n        },\n        item: {\n            backgroundColor: 'lightgray',\n            padding: 6,\n            marginVertical: 2,\n            marginHorizontal: 16,\n            borderRadius: 4,\n        }\n    });\n    export default CommentComponent;\n","// App.js\nimport React from 'react';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport SearchScreen from './components/Search';\nimport ResultsScreen from './components/Result';\nimport RestaurantDetailsScreen from './components/RestaurantDetails'\nimport Toast from 'react-native-toast-message';\nimport CommentComponent from './components/comments';\n\nconst Stack = createStackNavigator();\n\nconst App = () => {\n  return (\n    <NavigationContainer>\n    <CommentComponent />\n      <Stack.Navigator initialRouteName=\"Search\">\n        <Stack.Screen name=\"Search\" component={SearchScreen} options={{ title: 'Recherche' }} />\n        <Stack.Screen name=\"Results\" component={ResultsScreen} options={{ title: 'Résultats' }} />\n        <Stack.Screen\n        name=\"RestaurantDetails\"\n        component={RestaurantDetailsScreen}\n        options={{ title: \"Détails du restaurant\"}}\n        />\n      </Stack.Navigator>\n      <Toast ref={(ref) => Toast.setRef(ref)} />\n    </NavigationContainer>\n  );\n};\n\n\n\nexport default App;\n"],"sourceRoot":""}