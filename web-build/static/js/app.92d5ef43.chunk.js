(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{216:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(365),i=r(358),o=r(50),s=r.n(o),c=r(15),l=r.n(c),d=r(10),u=r(64),f=r(119),h=r(11),j=r(71),b=r.n(j),p=b.a.create({baseURL:"https://purple-art-1f04.bellatif6169.workers.dev/https://api.yelp.com/v3/businesses",headers:{Authorization:"Bearer p2lseXmq5yarrSoE6PGD8hsXxBwmJV5U1dbV8FodsK26NFwKY3YcurmXSJi-3R9RhtiLpJRZbOi90665i5a_UZxA3RzsIu1gGnaYH24JzcSwoTrsp7_0Y_0xYYMhZHYx"}});p.defaults.headers.common["Access-Control-Allow-Origin"]="*",p.defaults.headers.common.Accept="application/json";var g=p,m=r(99),O=r(18),y=h.default.create({container:{flex:1,justifyContent:"center",paddingHorizontal:10},input:{height:40,borderColor:"gray",borderWidth:1,marginBottom:10,paddingLeft:10}}),x=function(e){var t=e.navigation,r=Object(n.useState)(""),a=l()(r,2),i=a[0],o=a[1],c=Object(n.useState)(""),h=l()(c,2),j=h[0],b=h[1],p=Object(n.useState)(!1),x=l()(p,2),v=(x[0],x[1]),C=function(){var e=s()((function*(){console.log("resto",i);try{var e=yield g.get("/search",{params:{term:i,location:j}});t.navigate("Results",{results:e.data.businesses})}catch(r){v(!0),m.default.show({type:"error",position:"bottom",text1:"Aucun r\xe9sultat, veuillez r\xe9esseyer    ",visibilityTime:4e3,autoHide:!0,topOffset:30,bottomOffset:40}),console.error("Error fetching data from Yelp API:",r)}}));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)(d.default,{style:y.container,children:[Object(O.jsx)(u.default,{style:y.input,value:i,onChangeText:o,placeholder:"Nom du restaurant"}),Object(O.jsx)(u.default,{style:y.input,value:j,onChangeText:b,placeholder:"Ville ou code postal"}),Object(O.jsx)(f.default,{title:"Valider",onPress:C})]})},v=r(29),C=r(87),w=r(55),R=r(83),S=h.default.create({container:{flex:1,backgroundColor:"#fff"},restaurantContainer:{flexDirection:"row",marginHorizontal:10,marginVertical:5,backgroundColor:"#f5f5f5",borderRadius:5},image:{width:100,height:100,borderRadius:5},restaurantInfo:{marginLeft:10,justifyContent:"space-around",flex:1},name:{fontWeight:"bold"}}),k=function(e){var t=e.route,r=e.navigation,n=t.params.results;return Object(O.jsx)(d.default,{style:S.container,children:Object(O.jsx)(C.default,{data:n,renderItem:function(e){var t=e.item;return Object(O.jsx)(R.default,{onPress:function(){return r.navigate("RestaurantDetails",{restaurantId:t.id})},children:Object(O.jsxs)(d.default,{style:S.restaurantContainer,children:[Object(O.jsx)(w.default,{style:S.image,source:{uri:t.image_url}}),Object(O.jsxs)(d.default,{style:S.restaurantInfo,children:[Object(O.jsx)(v.default,{style:S.name,children:t.name}),Object(O.jsx)(v.default,{children:t.price}),Object(O.jsx)(v.default,{children:t.categories.map((function(e){return e.title})).join(", ")}),Object(O.jsx)(v.default,{children:t.location.address1})]})]})})},keyExtractor:function(e){return e.id}})})},P=r(65),T=h.default.create({container:{flex:1,backgroundColor:"#fff",padding:10},image:{width:"100%",height:200,marginBottom:15},restaurantDetails:{marginBottom:20},restaurantName:{fontSize:24,fontWeight:"bold",marginBottom:5},reviewsContainer:{},reviewsTitle:{fontSize:20,fontWeight:"bold",marginBottom:10},review:{marginBottom:10,borderBottomWidth:1,borderBottomColor:"#ccc",paddingBottom:10},reviewUser:{fontWeight:"bold"},reviewRating:{fontStyle:"italic"}}),B=function(e){var t=e.route.params.restaurantId,r=Object(n.useState)(null),a=l()(r,2),i=a[0],o=a[1],c=Object(n.useState)([]),u=l()(c,2),f=u[0],h=u[1];return Object(n.useEffect)((function(){var e=function(){var e=s()((function*(){try{var e=yield g.get("/"+t);o(e.data)}catch(r){console.error("Error fetching restaurant details:",r)}}));return function(){return e.apply(this,arguments)}}(),r=function(){var e=s()((function*(){try{var e=yield g.get("/"+t+"/reviews");h(e.data.reviews)}catch(r){console.error("Error fetching restaurant reviews:",r)}}));return function(){return e.apply(this,arguments)}}();e(),r()}),[t]),i?Object(O.jsxs)(P.default,{style:T.container,children:[Object(O.jsx)(w.default,{style:T.image,source:{uri:i.image_url}}),Object(O.jsxs)(d.default,{style:T.restaurantDetails,children:[Object(O.jsx)(v.default,{style:T.restaurantName,children:i.name}),Object(O.jsxs)(v.default,{children:[i.price," - ",i.categories.map((function(e){return e.title})).join(", ")]}),Object(O.jsx)(v.default,{children:i.location.address1}),Object(O.jsxs)(v.default,{children:["Telephone: ",i.display_phone]}),Object(O.jsxs)(v.default,{children:["Note: ",i.rating," (",i.review_count," avis)"]})]}),Object(O.jsxs)(d.default,{style:T.reviewsContainer,children:[Object(O.jsx)(v.default,{style:T.reviewsTitle,children:"Avis:"}),f.map((function(e,t){return Object(O.jsxs)(d.default,{style:T.review,children:[Object(O.jsxs)(v.default,{style:T.reviewUser,children:[e.user.name,":"]}),Object(O.jsx)(v.default,{children:e.text}),Object(O.jsxs)(v.default,{style:T.reviewRating,children:["Rating: ",e.rating]})]},t)}))]})]}):Object(O.jsx)(v.default,{children:"Loading..."})},E=r(16),W=r.n(E),z=(b.a.create({baseURL:"https://purple-art-1f04.bellatif6169.workers.dev/https://api-livre.bellatif6169.workers.dev",headers:{"Content-Type":"application/json","Referrer-Policy":"strict-origin-when-cross-origin","Cross-Origin-Embedder-Policy":'require-corp; report-to="default";',"Cross-Origin-Opener-Policy":'same-site; report-to="default";',"Cross-Origin-Resource-Policy":"same-site","X-Content-Type-Options":"nosniff"}}),b.a.create({baseURL:"https://api-livre.bellatif6169.workers.dev",headers:{"Content-Type":"*/*"}})),A=r(145),I=h.default.create({container:{flex:1,padding:20,backgroundColor:"#fff"},heading:{fontSize:24,fontWeight:"bold",marginBottom:20},commentContainer:{marginBottom:10,borderWidth:1,borderColor:"#ccc",padding:10},username:{fontWeight:"bold"},content:{marginTop:5},input:{borderWidth:1,borderColor:"#ccc",padding:10,marginBottom:10},button:{backgroundColor:"blue",color:"#fff",padding:10},item:{backgroundColor:"lightgray",padding:6,marginVertical:2,marginHorizontal:16,borderRadius:4}}),L=function(){var e=Object(n.useState)([]),t=l()(e,2),r=t[0],a=t[1],i=Object(n.useState)(""),o=l()(i,2),c=o[0],h=o[1];Object(n.useEffect)((function(){z.get("/comments/").then((function(e){console.log(e.data),e.data.length>5&&(e.data=e.data.slice(e.data.length-5,e.data.length)),a(e.data)}))}),[]);var j=function(){var e=s()((function*(){fetch("https://api-livre.bellatif6169.workers.dev/comments/",{method:"POST",headers:{"Content-Type":"application/json","Referrer-Policy":"strict-origin-when-cross-origin","Cross-Origin-Embedder-Policy":'require-corp; report-to="default";',"Cross-Origin-Opener-Policy":'same-site; report-to="default";',"Cross-Origin-Resource-Policy":"same-site","X-Content-Type-Options":"nosniff"},body:JSON.stringify({content:c})}).then((function(e){a([].concat(W()(r),[c])),r.length>5&&r.shift(),h("")})).catch((function(e){console.error("Error fetching data from Cloudflare Workers API:",e)}))}));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)(d.default,{style:I.container,children:[Object(O.jsx)(v.default,{style:I.heading,children:"Livre d'or"}),Object(O.jsx)(A.ScrollView,{style:I.container,children:Object(O.jsx)(A.FlatList,{data:r,keyExtractor:function(e,t){return t},renderItem:function(e){var t=e.item;return Object(O.jsx)(d.default,{style:I.item,children:Object(O.jsxs)(v.default,{children:["anonyme: ",t]})})}})}),Object(O.jsx)(v.default,{style:I.heading,children:"Add a comment"}),Object(O.jsxs)(d.default,{style:I.container,children:[Object(O.jsx)(u.default,{style:I.input,placeholder:"Enter your comment",value:c,onChangeText:h}),Object(O.jsx)(f.default,{style:I.button,title:"Submit",onPress:j})]})]})},N=Object(i.default)();t.default=function(){return Object(O.jsxs)(a.default,{children:[Object(O.jsx)(L,{}),Object(O.jsxs)(N.Navigator,{initialRouteName:"Search",children:[Object(O.jsx)(N.Screen,{name:"Search",component:x,options:{title:"Recherche"}}),Object(O.jsx)(N.Screen,{name:"Results",component:k,options:{title:"R\xe9sultats"}}),Object(O.jsx)(N.Screen,{name:"RestaurantDetails",component:B,options:{title:"D\xe9tails du restaurant"}})]}),Object(O.jsx)(m.default,{ref:function(e){return m.default.setRef(e)}})]})}},222:function(e,t,r){e.exports=r(355)}},[[222,1,2]]]);
//# sourceMappingURL=app.92d5ef43.chunk.js.map